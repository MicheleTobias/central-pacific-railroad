<!DOCTYPE html>
<html>
<head>
	<style>
		#map1 { height: 600px; width: 600px; margin-right: 5px; }

		#attribution {
			font: 12px/1.5 Lato, "Helvetica Neue", Helvetica, Arial, sans-serif;
			color: #555;}

		td {
			text-align: center;
			font-weight: bold;
			}
	</style>

	<title>Central Pacific Railroad Project</title>
	<meta charset="utf-8" />
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
	
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
	<!-- <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script> -->



</head>



<body>
	<header>
		<h1>Central Pacific Railroad Project</h1>
	</header>

	<section>
		<p>The goal of this project is to use primary map sources to better understand the history and route logic of the route of the Central Pacific Railroad.</p>
	</section>

<section>
	<div id="map1" style="width: 800px; height: 600px;"></div>
	
	<script>
	var mymap = L.map('map1').setView([39.0, -120.75], 9);
/*
 L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/streets-v11',
		tileSize: 512,
		zoomOffset: -1
	}).addTo(mymap);
*/
	
	//https://basemap.nationalmap.gov/arcgis/services/USGSTopo/MapServer/WMSServer?request=GetCapabilities&service=WMS
	

	var wmsLayer = L.tileLayer.wms('https://basemap.nationalmap.gov:443/arcgis/services/USGSTopo/MapServer/WmsServer', {
    layers: '0'
	}).addTo(mymap);


/*
	new L.TileLayer('https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/WMTS/tile/1.0.0/',{}).addTo(mymap);
*/

	//This page says this will work: https://gist.github.com/ThomasG77/c38e6b0ecfd014342aad  ... needed to install jquery
/*
  // load GeoJSON from an external file
  $.getJSON("data/cprr_lines.geojson",function(data){
    // add GeoJSON layer to the map once the file is loaded
    L.geoJson(data).addTo(mymap);
  });
*/

	//LOAD GEOJSON

  fetch('data/cprr_lines.geojson')
	.then(res => res.json())
	.then((out) => {
        L.geoJson(out, {style: function(feature) {
                switch (feature.properties.map_source) {
                case 'Judah Missing Maps 1861': return {color: "#f29e0c", opacity:0.7};
				case 'Montague 1868': return {color: "#5d9700", opacity:0.7};
				case 'Judah 1861': return {color: "#00FF7F", opacity:0.7};
				case 'USGS 1891': return {color: "#008fbb", opacity:0.7};
				case 'Judah 1861': return {color: "#cc484e", opacity:0.7};
				}}}).addTo(mymap);
		}).catch(err => console.error(err));

  fetch('data/cprr_diverging_areas.geojson')
	.then(res => res.json())
	.then((out) => {
        L.geoJson(out).addTo(mymap);
		}).catch(err => console.error(err));

	//STYLE GEOJSON: https://gis.stackexchange.com/questions/272490/styling-individual-features-in-a-geojson-layer

	</script>
</section>


<section>
<h3>About This Map</h3>
<p>The purpose of this map is to explore the changes in the planned route of the Central Pacific Railroad.  The map uses <a href="https://leafletjs.com/">Leaflet</a>.  This is very much a work in progress</p>


</section>
<section>
<h3>Recommended Citation:</h3>
<p id="citation"> Coming soon. </p>
</section>



</body>
</html>
