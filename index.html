<!DOCTYPE html>
<html>
<head>
	<style>
		#map1 { height: 600px; width: 600px; margin-right: 5px; }

		#attribution {
			font: 12px/1.5 Lato, "Helvetica Neue", Helvetica, Arial, sans-serif;
			color: #555;}

		td {
			text-align: center;
			font-weight: bold;
			}
			
		.legend {
			line-height: 18px;
			color: #000000;
			background-color: white;
			}
		.legend i {
			width: 18px;
			height: 18px;
			float: left;
			margin-right: 8px;
			opacity: 1;
			}
	</style>

	<title>Central Pacific Railroad Project</title>
	<meta charset="utf-8" />
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
	
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
	<!-- <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script> -->



</head>

<body>
	<header>
		<h1>Central Pacific Railroad Project</h1>
	</header>

	<section>
		<p>The goal of this project is to use primary map sources to better understand the history and route logic of the route of the Central Pacific Railroad.</p>
	</section>

<section>
	<div id="map1" style="width: 800px; height: 600px;"></div>
	
	<script>
	var mymap = L.map('map1').setView([39.0, -120.75], 9);

	var wmsLayer = L.tileLayer.wms('https://basemap.nationalmap.gov:443/arcgis/services/USGSTopo/MapServer/WmsServer', {
    layers: '0'
	}).addTo(mymap);


	//LOAD GEOJSON

  fetch('data/cprr_lines.geojson')
	.then(res => res.json())
	.then((out) => {
        L.geoJson(out, {weight:5, opacity:1, style: function(feature) {
                switch (feature.properties.map_source) {
                case 'Judah Missing Maps 1861': return {color: "#f29e0c"};
				case 'Montague 1868': return {color: "#5d9700"};
				case 'USGS 1891': return {color: "#008fbb"};
				case 'Judah 1861': return {color: "#cc484e"};
				}}}).addTo(mymap);
		}).catch(err => console.error(err));
//#c0444a

  fetch('data/cprr_diverging_areas.geojson')
	.then(res => res.json())
	.then((out) => {
        L.geoJson(out, {fillOpacity: 0, color: '#000000', weight: 2}).addTo(mymap);
		}).catch(err => console.error(err));

	//STYLE GEOJSON: https://gis.stackexchange.com/questions/272490/styling-individual-features-in-a-geojson-layer


// Layers Control

// Legend  ... reference: https://gis.stackexchange.com/questions/133630/adding-leaflet-legend
	var legend = L.control({position: 'bottomright'});
	
	legend.onAdd = function(mymap){
	
		var div = L.DomUtil.create('div', 'info legend');
			labels = ['<stong>Railroad Lines</stong>'];
			categories = ['Judah 1861', 'Judah Missing Maps 1861', 'Montague 1868', 'USGS 1891', 'Areas of Interest'];
			linecolors = ["#cc484e", "#f29e0c", "#5d9700", "#008fbb", "#000000"];
		
		for (var i = 0; i < categories.length; i++){
			div.innnerHTML +=
			labels.push('<i class="circle" style="background:' + linecolors[i] + '"></i> ' + (categories[i] ? categories[i] : '+'));
		
		}
		div.innerHTML = labels.join('<br>');
	
		return div;
	};

	legend.addTo(mymap);


	</script>
</section>


<section>
<h3>About This Map</h3>
<p>The purpose of this map is to explore the changes in the planned route of the Central Pacific Railroad.  The map uses <a href="https://leafletjs.com/">Leaflet</a>.  This is very much a work in progress</p>


</section>
<section>
<h3>Recommended Citation:</h3>
<p id="citation"> Coming soon. </p>
</section>



</body>
</html>
